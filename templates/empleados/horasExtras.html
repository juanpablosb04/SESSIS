<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Tiempo Adicional - Portal Administrativo</title>
  <!-- Tipografías corporativas -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Roboto:wght@300;400;500;600&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Iconografía profesional -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/static/horasExtras.css">
  <script src="/static/JS/navbar.js"></script>
  
</head>
<body>
  <main class="plataforma-tiempo-extra">
    <!-- Módulo de Registro de Tiempo Extra -->
    <section class="modulo-registro-tiempo">
      <div class="cabecera-modulo">
        <div class="icono-tiempo-principal">
          <i class="fas fa-clock"></i>
        </div>
        <h2 class="titulo-seccion">Control de Tiempo Adicional</h2>
        <p class="descripcion-modulo">Sistema especializado para el registro y gestión de horas laborales extraordinarias</p>
      </div>

      <form id="formularioTiempoExtra" class="formulario-tiempo-extra">
        <div class="grupo-entrada">
          <label class="etiqueta-entrada">
            <i class="fas fa-id-card"></i>
            Identificación del Colaborador
          </label>
          <input type="text" class="campo-entrada" name="cedulaEmpleado" placeholder="Ingrese número de cédula del empleado" required>
        </div>

        <div class="grupo-entrada doble-columna">
          <div>
            <label class="etiqueta-entrada">
              <i class="fas fa-calendar-alt"></i>
              Fecha de Labores Extras
            </label>
            <input type="date" class="campo-entrada" name="fechaLabores" required>
          </div>
          <div>
            <label class="etiqueta-entrada">
              <i class="fas fa-stopwatch"></i>
              Cantidad de Horas
            </label>
            <input type="number" class="campo-entrada" name="cantidadHoras" placeholder="Número de horas trabajadas" min="0.5" step="0.5" max="12" required>
          </div>
        </div>

        <div class="grupo-entrada">
          <label class="etiqueta-entrada">
            <i class="fas fa-clipboard-list"></i>
            Justificación Detallada
          </label>
          <textarea class="area-descripcion" name="motivoDetallado" placeholder="Describa detalladamente el motivo que justifica las horas extras trabajadas, incluyendo las tareas realizadas y su importancia..." required></textarea>
        </div>

        <button type="submit" class="boton-registro-principal">
          <i class="fas fa-save"></i>
          Registrar Tiempo Extra
          <i class="fas fa-arrow-right" style="margin-left: 10px;"></i>
        </button>
      </form>
    </section>

    <!-- Módulo de Historial de Registros -->
    <section class="modulo-historial-registros">
      <div class="cabecera-historial">
        <h3 class="titulo-historial">
          <i class="fas fa-history" style="margin-right: 15px; color: var(--color-acento-interactivo);"></i>
          Historial de Tiempo Extra
        </h3>
        <div class="indicador-registros">
          <i class="fas fa-database"></i>
          Total: <span id="contadorRegistros">2</span> registros
        </div>
      </div>

      <div class="contenedor-tabla-datos">
        <table class="tabla-tiempo-extra">
          <thead>
            <tr>
              <th><i class="fas fa-calendar"></i> Fecha</th>
              <th><i class="fas fa-clock"></i> Horas</th>
              <th><i class="fas fa-comment"></i> Justificación</th>
              <th><i class="fas fa-check-circle"></i> Estado</th>
              <th><i class="fas fa-cogs"></i> Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaRegistrosTiempo">
            <tr data-registro="1">
              <td><strong>05 Agosto 2025</strong></td>
              <td><span style="font-weight: 600; color: var(--color-acento-interactivo);">2.0 hrs</span></td>
              <td>Soporte técnico fuera de horario regular</td>
              <td><span class="etiqueta-estado estado-aprobado">Aprobado</span></td>
              <td>
                <div class="acciones-registro">
                  <button class="accion-ver" onclick="verDetalleRegistro(1)" title="Ver detalles">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="accion-borrar" onclick="confirmarBorrarRegistro(1)" title="Borrar registro">
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </div>
              </td>
            </tr>
            <tr data-registro="2">
              <td><strong>01 Agosto 2025</strong></td>
              <td><span style="font-weight: 600; color: var(--color-acento-interactivo);">1.0 hrs</span></td>
              <td>Capacitación especializada del personal</td>
              <td><span class="etiqueta-estado estado-pendiente">En Revisión</span></td>
              <td>
                <div class="acciones-registro">
                  <button class="accion-ver" onclick="verDetalleRegistro(2)" title="Ver detalles">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="accion-borrar" onclick="confirmarBorrarRegistro(2)" title="Borrar registro">
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Modal de confirmación para borrar -->
    <div id="modalConfirmacion" class="modal-overlay">
      <div class="modal-contenido">
        <div class="modal-icono">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
          <h4 class="modal-titulo">Confirmar eliminación</h4>
          <p class="modal-mensaje">¿Estás seguro de que deseas eliminar este registro de tiempo extra? Esta acción no se puede deshacer.</p>
          <div class="modal-acciones">
            <button class="boton-modal boton-confirmar" onclick="eliminarRegistroConfirmado()">Sí, eliminar</button>
            <button class="boton-modal boton-cancelar" onclick="cerrarModal()">Cancelar</button>
          </div>
        </div>
      </div>

      <!-- Sistema de notificación -->
      <div id="notificacion" class="sistema-notificacion notificacion-info">
        <div class="contenido-notificacion">
          <i class="fas fa-bell"></i>
          <span id="mensajeNotificacion">Tienes citas registradas para hoy.</span>
          <button class="cerrar-notificacion" onclick="cerrarNotificacion()">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
  </main>

  <script>
    let idParaEliminar = null;

    function confirmarBorrarRegistro(id) {
      idParaEliminar = id;
      document.getElementById('modalConfirmacion').classList.add('mostrar');
    }

    function cerrarModal() {
      idParaEliminar = null;
      document.getElementById('modalConfirmacion').classList.remove('mostrar');
    }

    function eliminarRegistroConfirmado() {
      if (idParaEliminar !== null) {
        const fila = document.querySelector(`tr[data-registro="${idParaEliminar}"]`);
        if (fila) {
          fila.classList.add('fila-eliminando');
          setTimeout(() => {
            fila.remove();
            actualizarContador();
            mostrarNotificacion("Registro eliminado correctamente.", "exito");
          }, 500);
        }
        cerrarModal();
      }
    }

    function verDetalleRegistro(id) {
      mostrarNotificacion(`Visualizando detalles del registro #${id}`, "info");
    }

    function mostrarNotificacion(mensaje, tipo = "info") {
      const notificacion = document.getElementById('notificacion');
      notificacion.className = `sistema-notificacion notificacion-${tipo} mostrar`;
      document.getElementById('mensajeNotificacion').innerText = mensaje;

      setTimeout(() => {
        notificacion.classList.remove('mostrar');
      }, 5000);
    }

    function cerrarNotificacion() {
      document.getElementById('notificacion').classList.remove('mostrar');
    }

    function actualizarContador() {
      const total = document.querySelectorAll('#tablaRegistrosTiempo tr').length;
      document.getElementById('contadorRegistros').innerText = total;
    }

    // Simulación automática de notificación de citas al cargar
    window.addEventListener('load', () => {
      setTimeout(() => {
        mostrarNotificacion("¡Recordatorio! Hoy hay citas programadas.", "info");
      }, 1000);
    });
  </script>
</body>
</html>