<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Registro - Incidencias Laborales</title>
  <!-- Tipograf√≠as personalizadas -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Roboto:wght@300;400;500;700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Iconograf√≠a -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/static/ReportesIncidentes.css">
  <script src="/static/JS/navbarEmpleados.js"></script>
  
</head>
<body>
  <main class="formulario-principal">
    <header class="seccion-encabezado">
      <button class="boton-navegacion" onclick="window.location.href='index.html'">
        <i class="fas fa-home"></i> Inicio
      </button>
      

      <div>
        <div class="icono-principal">
          <i class="fas fa-clipboard-list"></i>
        </div>
        <h1 class="titulo-principal">Sistema de Incidencias</h1>
        <p class="descripcion-sistema">Plataforma integral para el registro y gesti√≥n de eventos laborales</p>
      </div>
    </header>

    <section class="area-formulario">
      <form id="formularioIncidencias">
        <div class="rejilla-campos">
          <div class="grupo-campo">
            <label for="fechaEvento" class="etiqueta-campo campo-requerido">
              <i class="fas fa-calendar-day"></i>
              Fecha del Evento
            </label>
            <input type="date" id="fechaEvento" name="fechaEvento" class="campo-entrada" required>
          </div>

          <div class="grupo-campo">
            <label for="categoriaIncidente" class="etiqueta-campo campo-requerido">
              <i class="fas fa-list-alt"></i>
              Categor√≠a del Incidente
            </label>
            <select id="categoriaIncidente" name="categoriaIncidente" class="campo-seleccion" required>
              <option value="">Seleccionar categor√≠a</option>
              <option value="accidente-trabajo">üîß Accidente de trabajo</option>
              <option value="fallo-equipamiento">‚öôÔ∏è Fallo de equipamiento</option>
              <option value="incidente-seguridad">üõ°Ô∏è Incidente de seguridad</option>
              <option value="problema-ambiental">üåø Problema ambiental</option>
              <option value="otros-eventos">üìã Otros eventos</option>
            </select>
          </div>

          <div class="grupo-campo campo-completo">
            <label for="detallesIncidente" class="etiqueta-campo campo-requerido">
              <i class="fas fa-edit"></i>
              Descripci√≥n Detallada del Evento
            </label>
            <textarea 
              id="detallesIncidente" 
              name="detallesIncidente" 
              class="campo-texto"
              placeholder="Proporcione una descripci√≥n completa del incidente incluyendo: circunstancias del evento, personas involucradas, ubicaci√≥n exacta, consecuencias observadas y cualquier acci√≥n inmediata tomada..."
              required>
            </textarea>
          </div>

          <div class="grupo-campo campo-completo">
            <label class="etiqueta-campo">
              <i class="fas fa-file-upload"></i>
              Documentaci√≥n de Soporte (Opcional)
            </label>
            <div class="contenedor-archivo">
              <input 
                type="file" 
                id="documentoSoporte" 
                name="documentoSoporte" 
                class="entrada-archivo-oculta"
                accept="image/*,.pdf,.doc,.docx,.txt"
                multiple>
              <div class="zona-archivo">
                <i class="fas fa-cloud-upload-alt icono-archivo"></i>
                <span class="texto-archivo">Arrastra tus archivos aqu√≠ o haz clic para seleccionar</span>
              </div>
            </div>
          </div>

          <div class="grupo-campo campo-completo">
            <button type="submit" class="boton-enviar">
              <i class="fas fa-paper-plane"></i>
              Registrar Incidente
              <i class="fas fa-chevron-right icono-envio"></i>
            </button>
          </div>
        </div>
      </form>
    </section>
  </main>

  <script>
    // Sistema de validaci√≥n y mejora de experiencia
    (function() {
      'use strict';
      
      const formulario = document.getElementById('formularioIncidencias');
      const camposFormulario = document.querySelectorAll('.campo-entrada, .campo-texto, .campo-seleccion');
      const archivoInput = document.getElementById('documentoSoporte');
      const zonaArchivo = document.querySelector('.zona-archivo');
      const textoArchivo = document.querySelector('.texto-archivo');
      
      // Inicializaci√≥n al cargar la p√°gina
      document.addEventListener('DOMContentLoaded', function() {
        establecerFechaActual();
        configurarValidacionTiempoReal();
        configurarSubidaArchivos();
      });

      function establecerFechaActual() {
        const inputFecha = document.getElementById('fechaEvento');
        const fechaHoy = new Date().toISOString().split('T')[0];
        inputFecha.value = fechaHoy;
        inputFecha.closest('.grupo-campo').classList.add('campo-valido');
      }

      function configurarValidacionTiempoReal() {
        camposFormulario.forEach(campo => {
          campo.addEventListener('input', function() {
            validarCampo(this);
          });
          
          campo.addEventListener('blur', function() {
            validarCampo(this);
          });
        });
      }

      function validarCampo(campo) {
        const grupoContenedor = campo.closest('.grupo-campo');
        
        if (campo.value.trim() !== '') {
          grupoContenedor.classList.add('campo-valido');
        } else {
          grupoContenedor.classList.remove('campo-valido');
        }
      }

      function configurarSubidaArchivos() {
        archivoInput.addEventListener('change', function() {
          const archivosSeleccionados = this.files.length;
          
          if (archivosSeleccionados > 0) {
            const textoArchivos = archivosSeleccionados === 1 
              ? `üìÑ ${this.files[0].name}` 
              : `üìÅ ${archivosSeleccionados} archivos seleccionados`;
            
            textoArchivo.textContent = textoArchivos;
            this.closest('.grupo-campo').classList.add('campo-valido');
          } else {
            textoArchivo.textContent = 'Arrastra tus archivos aqu√≠ o haz clic para seleccionar';
            this.closest('.grupo-campo').classList.remove('campo-valido');
          }
        });

        // Funcionalidad drag and drop
        zonaArchivo.addEventListener('dragover', function(e) {
          e.preventDefault();
          this.style.borderColor = 'var(--color-acento)';
          this.style.backgroundColor = '#f0f4ff';
        });

        zonaArchivo.addEventListener('dragleave', function() {
          this.style.borderColor = '#cbd5e0';
          this.style.backgroundColor = '#f8fafc';
        });

        zonaArchivo.addEventListener('drop', function(e) {
          e.preventDefault();
          archivoInput.files = e.dataTransfer.files;
          archivoInput.dispatchEvent(new Event('change'));
          this.style.borderColor = '#cbd5e0';
          this.style.backgroundColor = '#f8fafc';
        });
      }

      // Manejo del env√≠o del formulario
      formulario.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const botonEnvio = this.querySelector('.boton-enviar');
        const textoOriginal = botonEnvio.innerHTML;
        
        botonEnvio.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Procesando...';
        botonEnvio.disabled = true;
        
        setTimeout(() => {
          botonEnvio.innerHTML = '<i class="fas fa-check-circle"></i> ¬°Enviado Correctamente!';
          botonEnvio.style.background = 'linear-gradient(135deg, #10b981, #059669)';
          
          setTimeout(() => {
            botonEnvio.innerHTML = textoOriginal;
            botonEnvio.disabled = false;
            botonEnvio.style.background = '';
          }, 2000);
        }, 1500);
      });
    })();
  </script>
</body>
</html>