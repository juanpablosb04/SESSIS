<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Administración - Personal Corporativo</title>
  <!-- Fuentes personalizadas -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Roboto:wght@300;400;500;600&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Iconografía moderna -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles/Usuarios.css">
  <script src="/JS/navbar.js"></script>
  
</head>
<body>
  <main class="panel-administrativo">
    <!-- Cabecera del sistema -->
    <header class="cabecera-panel">
      <button class="navegacion-superior" onclick="window.location.href='index.html'">
        <i class="fas fa-home"></i> Dashboard
      </button>
      
      <div class="contenido-cabecera">
        <div class="icono-panel">
          <i class="fas fa-users-cog"></i>
        </div>
        <h1 class="titulo-sistema">Centro de Control de Personal</h1>
        <p class="descripcion-panel">Administración integral y gestión avanzada de recursos humanos</p>
      </div>
    </header>

    <!-- Contenido principal -->
    <section class="contenido-principal">
      <!-- Barra de herramientas -->
      <div class="barra-herramientas">
        <div class="contador-registros">
          <i class="fas fa-database"></i>
          Total de colaboradores: <strong>1 registro</strong>
        </div>
        <button class="boton-nuevo-registro" onclick="mostrarFormulario()">
          <i class="fas fa-user-plus"></i> Crear Nuevo Perfil
        </button>
      </div>

      <!-- Tabla de usuarios -->
      <div class="contenedor-tabla">
        <table class="tabla-usuarios">
          <thead>
            <tr>
              <th><i class="fas fa-id-card"></i> Identificación</th>
              <th><i class="fas fa-user"></i> Nombre Completo</th>
              <th><i class="fas fa-briefcase"></i> Función</th>
              <th><i class="fas fa-envelope"></i> Contacto Email</th>
              <th><i class="fas fa-toggle-on"></i> Estatus</th>
              <th><i class="fas fa-cogs"></i> Operaciones</th>
            </tr>
          </thead>
          <tbody id="tablaPersonal">
            <tr data-usuario="1">
              <td><strong>123456789</strong></td>
              <td>Adriel Gago Reyes</td>
              <td><span class="etiqueta-rol empleado">Empleado Operativo</span></td>
              <td>GagoMar@empresa.com</td>
              <td><span class="etiqueta-estado estado-activo">Activo</span></td>
              <td>
                <div class="grupo-acciones">
                  <button class="accion-boton accion-editar" onclick="editarUsuario(1)">
                    <i class="fas fa-edit"></i> Modificar
                  </button>
                  <button class="accion-boton accion-desactivar" onclick="desactivarUsuario(1)">
                    <i class="fas fa-user-times"></i> Desactivar
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Modal del formulario -->
    <div id="overlayModal" class="modal-overlay" onclick="cerrarFormulario()">
      <div class="formulario-modal" onclick="event.stopPropagation()">
        <h2 class="titulo-formulario">Registro de Nuevo Colaborador</h2>
        
        <form id="formularioPersonal">
          <div class="campo-formulario">
            <label class="etiqueta-campo">
              <i class="fas fa-id-card"></i>
              Número de Identificación
            </label>
            <input type="text" class="entrada-campo" name="identificacion" placeholder="Ingrese cédula de identidad" required>
          </div>

          <div class="campo-formulario">
            <label class="etiqueta-campo">
              <i class="fas fa-user"></i>
              Nombre Completo
            </label>
            <input type="text" class="entrada-campo" name="nombreCompleto" placeholder="Nombres y apellidos completos" required>
          </div>

          <div class="campo-formulario">
            <label class="etiqueta-campo">
              <i class="fas fa-envelope"></i>
              Correo Electrónico Corporativo
            </label>
            <input type="email" class="entrada-campo" name="emailCorporativo" placeholder="usuario@empresa.com" required>
          </div>

          <div class="campo-formulario">
            <label class="etiqueta-campo">
              <i class="fas fa-briefcase"></i>
              Rol Organizacional
            </label>
            <select class="seleccion-campo" name="rolOrganizacional" required>
              <option value="">Seleccionar posición</option>
              <option value="administrador">Administrador del Sistema</option>
              <option value="empleado">Empleado Operativo</option>
              <option value="supervisor">Supervisor de Área</option>
              <option value="gerente">Gerente Departamental</option>
            </select>
          </div>

          <div class="campo-formulario">
            <label class="etiqueta-campo">
              <i class="fas fa-toggle-on"></i>
              Estado del Perfil
            </label>
            <select class="seleccion-campo" name="estadoPerfil">
              <option value="activo">Perfil Activo</option>
              <option value="inactivo">Perfil Suspendido</option>
              <option value="pendiente">Validación Pendiente</option>
            </select>
          </div>

          <div class="acciones-formulario">
            <button type="submit" class="boton-guardar">
              <i class="fas fa-save"></i> Registrar Colaborador
            </button>
            <button type="button" class="boton-cancelar" onclick="cerrarFormulario()">
              <i class="fas fa-times"></i> Cancelar Proceso
            </button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <script>
    // Sistema de gestión de usuarios completamente reescrito
    (function() {
      'use strict';
      
      const gestorUsuarios = {
        usuarios: [
          {
            id: 1,
            identificacion: '123456789',
            nombreCompleto: 'Marvin Gago Reyes',
            email: 'GagoMar@empresa.com',
            rol: 'empleado',
            estado: 'activo'
          }
        ],
        
        // Inicialización del sistema
        inicializar() {
          this.configurarEventos();
          this.actualizarContador();
        },
        
        // Configuración de eventos
        configurarEventos() {
          const formulario = document.getElementById('formularioPersonal');
          formulario.addEventListener('submit', (evento) => this.procesarFormulario(evento));
          
          // Validación en tiempo real
          const camposEntrada = formulario.querySelectorAll('.entrada-campo, .seleccion-campo');
          camposEntrada.forEach(campo => {
            campo.addEventListener('blur', () => this.validarCampo(campo));
            campo.addEventListener('input', () => this.limpiarError(campo));
          });
        },
        
        // Mostrar formulario modal
        mostrarModal() {
          const overlay = document.getElementById('overlayModal');
          overlay.classList.add('activo');
          document.body.style.overflow = 'hidden';
        },
        
        // Ocultar formulario modal
        ocultarModal() {
          const overlay = document.getElementById('overlayModal');
          overlay.classList.remove('activo');
          document.body.style.overflow = 'auto';
          this.limpiarFormulario();
        },
        
        // Validar campo individual
        validarCampo(campo) {
          const contenedor = campo.closest('.campo-formulario');
          const valor = campo.value.trim();
          
          if (valor === '') {
            contenedor.classList.add('campo-error');
            contenedor.classList.remove('campo-valido');
            return false;
          } else {
            contenedor.classList.add('campo-valido');
            contenedor.classList.remove('campo-error');
            return true;
          }
        },
        
        // Limpiar error de campo
        limpiarError(campo) {
          const contenedor = campo.closest('.campo-formulario');
          contenedor.classList.remove('campo-error');
        },
        
        // Procesar envío del formulario
        procesarFormulario(evento) {
          evento.preventDefault();
          
          const datosFormulario = new FormData(evento.target);
          const nuevoUsuario = {
            id: Date.now(),
            identificacion: datosFormulario.get('identificacion'),
            nombreCompleto: datosFormulario.get('nombreCompleto'),
            email: datosFormulario.get('emailCorporativo'),
            rol: datosFormulario.get('rolOrganizacional'),
            estado: datosFormulario.get('estadoPerfil')
          };
          
          if (this.validarFormularioCompleto()) {
            this.agregarUsuario(nuevoUsuario);
            this.mostrarNotificacion('Usuario registrado exitosamente', 'exito');
            this.ocultarModal();
          }
        },
        
        // Validar formulario completo
        validarFormularioCompleto() {
          const campos = document.querySelectorAll('.entrada-campo, .seleccion-campo');
          let formularioValido = true;
          
          campos.forEach(campo => {
            if (!this.validarCampo(campo)) {
              formularioValido = false;
            }
          });
          
          return formularioValido;
        },
        
        // Agregar nuevo usuario
        agregarUsuario(usuario) {
          this.usuarios.push(usuario);
          this.actualizarTabla();
          this.actualizarContador();
        },
        
        // Actualizar tabla de usuarios
        actualizarTabla() {
          const tbody = document.getElementById('tablaPersonal');
          tbody.innerHTML = '';
          
          this.usuarios.forEach(usuario => {
            const fila = this.crearFilaUsuario(usuario);
            tbody.appendChild(fila);
          });
        },
        
        // Crear fila de usuario
        crearFilaUsuario(usuario) {
          const fila = document.createElement('tr');
          fila.setAttribute('data-usuario', usuario.id);
          
          const estadoClase = usuario.estado === 'activo' ? 'estado-activo' : 'estado-inactivo';
          const rolTexto = this.obtenerTextoRol(usuario.rol);
          
          fila.innerHTML = `
            <td><strong>${usuario.identificacion}</strong></td>
            <td>${usuario.nombreCompleto}</td>
            <td><span class="etiqueta-rol ${usuario.rol}">${rolTexto}</span></td>
            <td>${usuario.email}</td>
            <td><span class="etiqueta-estado ${estadoClase}">${usuario.estado}</span></td>
            <td>
              <div class="grupo-acciones">
                <button class="accion-boton accion-editar" onclick="gestorUsuarios.editarUsuario(${usuario.id})">
                  <i class="fas fa-edit"></i> Modificar
                </button>
                <button class="accion-boton accion-desactivar" onclick="gestorUsuarios.desactivarUsuario(${usuario.id})">
                  <i class="fas fa-user-times"></i> Desactivar
                </button>
              </div>
            </td>
          `;
          
          return fila;
        },
        
        // Obtener texto del rol
        obtenerTextoRol(rol) {
          const roles = {
            'administrador': 'Administrador del Sistema',
            'empleado': 'Empleado Operativo',
            'supervisor': 'Supervisor de Área',
            'gerente': 'Gerente Departamental'
          };
          return roles[rol] || rol;
        },
        
        // Editar usuario
        editarUsuario(id) {
          this.mostrarNotificacion('Función de edición en desarrollo', 'info');
        },
        
        // Desactivar usuario
        desactivarUsuario(id) {
          const usuario = this.usuarios.find(u => u.id === id);
          if (usuario) {
            usuario.estado = usuario.estado === 'activo' ? 'inactivo' : 'activo';
            this.actualizarTabla();
            const accion = usuario.estado === 'activo' ? 'activado' : 'desactivado';
            this.mostrarNotificacion(`Usuario ${accion} correctamente`, 'exito');
          }
        },
        
        // Actualizar contador de registros
        actualizarContador() {
          const contador = document.querySelector('.contador-registros strong');
          const total = this.usuarios.length;
          const texto = total === 1 ? '1 registro' : `${total} registros`;
          contador.textContent = texto;
        },
        
        // Limpiar formulario
        limpiarFormulario() {
          const formulario = document.getElementById('formularioPersonal');
          formulario.reset();
          
          const campos = formulario.querySelectorAll('.campo-formulario');
          campos.forEach(campo => {
            campo.classList.remove('campo-valido', 'campo-error');
          });
        },
        
        // Sistema de notificaciones
        mostrarNotificacion(mensaje, tipo = 'info') {
          const notificacion = document.createElement('div');
          notificacion.className = `notificacion notificacion-${tipo}`;
          notificacion.innerHTML = `
            <div class="contenido-notificacion">
              <i class="fas ${this.obtenerIconoNotificacion(tipo)}"></i>
              <span>${mensaje}</span>
              <button class="cerrar-notificacion" onclick="this.parentElement.parentElement.remove()">
                <i class="fas fa-times"></i>
              </button>
            </div>
          `;
          
          document.body.appendChild(notificacion);
          
          // Mostrar notificación
          setTimeout(() => notificacion.classList.add('visible'), 100);
          
          // Auto-eliminar después de 4 segundos
          setTimeout(() => {
            notificacion.classList.remove('visible');
            setTimeout(() => notificacion.remove(), 300);
          }, 4000);
        },
        
        // Obtener icono para notificación
        obtenerIconoNotificacion(tipo) {
          const iconos = {
            'exito': 'fa-check-circle',
            'error': 'fa-exclamation-triangle',
            'info': 'fa-info-circle',
            'advertencia': 'fa-exclamation-circle'
          };
          return iconos[tipo] || 'fa-info-circle';
        }
      };
      
      // Funciones globales para compatibilidad
      window.mostrarFormulario = () => gestorUsuarios.mostrarModal();
      window.cerrarFormulario = () => gestorUsuarios.ocultarModal();
      window.editarUsuario = (id) => gestorUsuarios.editarUsuario(id);
      window.desactivarUsuario = (id) => gestorUsuarios.desactivarUsuario(id);
      window.gestorUsuarios = gestorUsuarios;
      
      // Inicializar sistema al cargar la página
      document.addEventListener('DOMContentLoaded', () => {
        gestorUsuarios.inicializar();
      });
      
    })();
  </script>
  
  <!-- Estilos adicionales para notificaciones -->
  <style>
    .notificacion {
      position: fixed;
      top: 30px;
      right: 30px;
      z-index: 9999;
      min-width: 350px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      transform: translateX(400px);
      transition: var(--transicion-suave);
      opacity: 0;
    }
    
    .notificacion.visible {
      transform: translateX(0);
      opacity: 1;
    }
    
    .contenido-notificacion {
      display: flex;
      align-items: center;
      padding: 18px 25px;
      background: var(--blanco-puro);
      border-radius: 15px;
      border-left: 5px solid;
      font-family: var(--fuente-moderna);
      font-weight: 500;
    }
    
    .notificacion-exito .contenido-notificacion {
      border-left-color: #10b981;
      color: #065f46;
    }
    
    .notificacion-error .contenido-notificacion {
      border-left-color: #ef4444;
      color: #991b1b;
    }
    
    .notificacion-info .contenido-notificacion {
      border-left-color: var(--azul-accion);
      color: var(--texto-principal);
    }
    
    .notificacion-advertencia .contenido-notificacion {
      border-left-color: #f59e0b;
      color: #92400e;
    }
    
    .contenido-notificacion i:first-child {
      margin-right: 12px;
      font-size: 1.2rem;
    }
    
    .cerrar-notificacion {
      background: none;
      border: none;
      margin-left: auto;
      padding: 5px;
      cursor: pointer;
      color: inherit;
      opacity: 0.7;
      transition: var(--transicion-suave);
    }
    
    .cerrar-notificacion:hover {
      opacity: 1;
      transform: scale(1.1);
    }
    
    .etiqueta-rol {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }
    
    .etiqueta-rol.administrador {
      background: linear-gradient(135deg, #ddd6fe, #c4b5fd);
      color: #6b21a8;
      border: 1px solid #a855f7;
    }
    
    .etiqueta-rol.empleado {
      background: linear-gradient(135deg, #dbeafe, #bfdbfe);
      color: #1e40af;
      border: 1px solid #3b82f6;
    }
    
    .etiqueta-rol.supervisor {
      background: linear-gradient(135deg, #fed7d7, #feb2b2);
      color: #c53030;
      border: 1px solid #e53e3e;
    }
    
    .etiqueta-rol.gerente {
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
      color: #047857;
      border: 1px solid #10b981;
    }
  </style>
</body>
</html>